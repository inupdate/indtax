/*!
 * jquery.okayNav.js 2.0.4 (https://github.com/VPenkov/okayNav)
 * Author: Vergil Penkov (http://vergilpenkov.com/)
 * MIT license: https://opensource.org/licenses/MIT
 */
!function(i){"function"==typeof define&&define.amd?define(["jquery"],i):"object"==typeof module&&module.exports?module.exports=function(t,n){return void 0===n&&(n="undefined"!=typeof window?require("jquery"):require("jquery")(t)),i(n),n}:i(jQuery)}((function(i){var t=!!("object"==typeof jnews&&"object"==typeof jnews.library)&&jnews.library,n={parent:"",toggle_icon_class:"okayNav__menu-toggle",toggle_icon_content:"<span /><span /><span />",align_right:!0,swipe_enabled:!0,threshold:50,resize_delay:10,beforeOpen:function(){},afterOpen:function(){},beforeClose:function(){},afterClose:function(){},itemHidden:function(){},itemDisplayed:function(){}};function e(e,o){this.options=i.extend({},n,o),this.navigation=i(e),this.document=i(document),this.window=i(window),""==this.options.parent&&(this.options.parent=this.navigation.parent()),this.nav_open=!1,this.parent_full_width=0,this.radCoef=180/Math.PI,this.sTouch={x:0,y:0},this.cTouch={x:0,y:0},this.sTime=0,this.nav_position=0,this.percent_open=0,this.nav_moving=!1,t&&(this.jnewsLibrary=t,this.init())}e.prototype={init:function(){i("body").addClass("okayNav-loaded"),this.navigation.addClass("okayNav loaded").children("ul").addClass("okayNav__nav--visible"),this.options.align_right?this.navigation.append('<ul class="okayNav__nav--invisible transition-enabled nav-right" />').append('<a href="#" class="'+this.options.toggle_icon_class+' okay-invisible">'+this.options.toggle_icon_content+"</a>"):this.navigation.prepend('<ul class="okayNav__nav--invisible transition-enabled nav-left" />').prepend('<a href="#" class="'+this.options.toggle_icon_class+' okay-invisible">'+this.options.toggle_icon_content+"</a>"),this.nav_visible=this.navigation.children(".okayNav__nav--visible"),this.nav_invisible=this.navigation.children(".okayNav__nav--invisible"),this.toggle_icon=this.navigation.children("."+this.options.toggle_icon_class),this.toggle_icon_width=this.toggle_icon.outerWidth(!0),this.default_width=this.getChildrenWidth(this.navigation),this.parent_full_width=i(this.options.parent).outerWidth(!0),this.last_visible_child_width=0,this.initEvents(),this.nav_visible.contents().filter((function(){return this.nodeType=Node.TEXT_NODE&&!1===/\S/.test(this.nodeValue)})).remove(),1==this.options.swipe_enabled&&this.initSwipeEvents()},initEvents:function(){var t=this;t.options.parent.on("click.okayNav",(function(n){var e=i(n.target);!0===t.nav_open&&0==e.closest(".okayNav").length&&t.closeInvisibleNav(),e.hasClass(t.options.toggle_icon_class)&&(n.preventDefault(),t.toggleInvisibleNav())})),i(document).on("mouseup.okayNav",(function(n){i(n.target);!i(n.target).parents(".okayNav").length>0&&t.closeInvisibleNav()}));var n=t._debounce((function(){t.recalcNav()}),t.options.recalc_delay);t.window.on("load.okayNav ready.okayNav resize.okayNav",n),i(document).on("ready.okayNav",n),n()},initSwipeEvents:function(){var t=this;t.document.on("touchstart.okayNav",(function(n){if(t.nav_invisible.removeClass("transition-enabled"),1==n.originalEvent.touches.length){var e=n.originalEvent.touches[0];(e.pageX<25&&0==t.options.align_right||e.pageX>i(t.options.parent).outerWidth(!0)-25&&1==t.options.align_right||!0===t.nav_open)&&(t.sTouch.x=t.cTouch.x=e.pageX,t.sTouch.y=t.cTouch.y=e.pageY,t.sTime=Date.now())}})).on("touchmove.okayNav",(function(i){var n=i.originalEvent.touches[0];t._triggerMove(n.pageX,n.pageY),t.nav_moving=!0})).on("touchend.okayNav",(function(i){t.sTouch={x:0,y:0},t.cTouch={x:0,y:0},t.sTime=0,t.percent_open>100-t.options.threshold?(t.nav_position=0,t.closeInvisibleNav()):1==t.nav_moving&&(t.nav_position=t.nav_invisible.width(),t.openInvisibleNav()),t.nav_moving=!1,t.nav_invisible.addClass("transition-enabled")}))},_getDirection:function(i){return this.options.align_right?i>0?-1:1:i<0?-1:1},_triggerMove:function(i,t){this.cTouch.x=i,this.cTouch.y=t;var n=Date.now(),e=this.cTouch.x-this.sTouch.x,o=this.cTouch.y-this.sTouch.y,a=o*o,s=Math.sqrt(e*e+a),l=Math.sqrt(a),h=Math.asin(Math.sin(l/s))*this.radCoef;this.sTime;if(this.sTouch.x=i,this.sTouch.y=t,h<20){var v=this._getDirection(e),c=this.nav_position+v*s,r=this.nav_invisible.width(),d=0;c<0?d=-c:c>r&&(d=r-c);var p=(r-(this.nav_position+v*s+d))/r*100;this.nav_position+=v*s+d,this.percent_open=p}},getParent:function(){return this.options.parent},getVisibleNav:function(){return this.nav_visible},getInvisibleNav:function(){return this.nav_invisible},getNavToggleIcon:function(){return this.toggle_icon},_debounce:function(i,t,n){var e,o=this;return function(){var t=this,a=arguments,s=function(){e&&o.jnewsLibrary.cancelAnimationFrame.call(o.jnewsLibrary.win,e),n||i.apply(t,a)},l=n&&!e;e&&o.jnewsLibrary.cancelAnimationFrame.call(o.jnewsLibrary.win,e),e=o.jnewsLibrary.requestAnimationFrame.call(o.jnewsLibrary.win,s),l&&i.apply(t,a)}},openInvisibleNav:function(){this.options.enable_swipe||this.options.beforeOpen.call(),this.toggle_icon.addClass("icon--active"),this.nav_invisible.addClass("nav-open"),this.nav_open=!0,this.options.afterOpen.call()},closeInvisibleNav:function(){this.options.enable_swipe||this.options.beforeClose.call(),this.toggle_icon.removeClass("icon--active"),this.nav_invisible.removeClass("nav-open"),this.nav_open=!1,this.options.afterClose.call()},toggleInvisibleNav:function(){this.nav_open?this.closeInvisibleNav():this.openInvisibleNav()},getChildrenWidth:function(t){for(var n=0,e=i(t).children(),o=0;o<e.length;o++)n+=i(e[o]).outerWidth(!0);return n},getVisibleItemCount:function(){return i("li",this.nav_visible).length},getHiddenItemCount:function(){return i("li",this.nav_invisible).length},recalcNav:function(){var t=i(this.options.parent).outerWidth(!0),n=this.getChildrenWidth(this.options.parent),e=this.navigation.outerWidth(!0),o=this.getVisibleItemCount(),a=this.nav_visible.outerWidth(!0)+this.toggle_icon_width,s=n+this.last_visible_child_width+this.toggle_icon_width;if(t>n-e+this.default_width)return this._expandAllItems(),void this.toggle_icon.addClass("okay-invisible");o>0&&e<=a&&t<=s&&this._collapseNavItem(),t>s+this.toggle_icon_width+15&&this._expandNavItem(),0==this.getHiddenItemCount()?this.toggle_icon.addClass("okay-invisible"):this.toggle_icon.removeClass("okay-invisible")},_collapseNavItem:function(){var t=this,n=i("li:last-child",t.nav_visible);t.last_visible_child_width=n.outerWidth(!0),t.document.trigger("okayNav:collapseItem",n),n.detach().prependTo(t.nav_invisible),t.options.itemHidden.call(),t.jnewsLibrary.requestAnimationFrame.call(t.jnewsLibrary.win,(function(){t.recalcNav()}))},_expandNavItem:function(){var t=i("li:first-child",this.nav_invisible);this.document.trigger("okayNav:expandItem",t),t.detach().appendTo(this.nav_visible),this.options.itemDisplayed.call()},_expandAllItems:function(){i("li",this.nav_invisible).detach().appendTo(this.nav_visible),this.options.itemDisplayed.call()},_collapseAllItems:function(){i("li",this.nav_visible).detach().appendTo(this.nav_invisible),this.options.itemHidden.call()},destroy:function(){i("li",this.nav_invisible).appendTo(this.nav_visible),this.nav_invisible.remove(),this.nav_visible.removeClass("okayNav__nav--visible"),this.toggle_icon.remove(),this.document.unbind(".okayNav"),this.window.unbind(".okayNav")}},i.fn.okayNav=function(n){var o,a=arguments;return void 0===n||"object"==typeof n?this.each((function(){var o=this;t&&t.requestAnimationFrame.call(t.win,(function(){i.data(o,"plugin_okayNav")||i.data(o,"plugin_okayNav",new e(o,n))}))})):"string"==typeof n&&"_"!==n[0]&&"init"!==n?(this.each((function(){var s=this;t&&t.requestAnimationFrame.call(t.win,(function(){var t=i.data(s,"plugin_okayNav");t instanceof e&&"function"==typeof t[n]&&(o=t[n].apply(t,Array.prototype.slice.call(a,1))),"destroy"===n&&i.data(s,"plugin_okayNav",null)}))})),void 0!==o?o:this):void 0}}));