!function(o){"use strict";window.jnews.zoom=window.jnews.zoom||{},window.jnews.zoom={init:function(){this.window=o("window"),this.container=o("body"),this.refresh=!1,this.is_enable=void 0!==jnewsoption.zoom_button?jnewsoption.zoom_button:0,this.is_rtl=void 0!==jnewsoption.zoom_button?parseInt(jnewsoption.rtl):0,this.transform_origin=this.is_rtl?"top right":"0 0",this.zoomContainer=this.container.find(".jeg_meta_zoom"),(this.is_enable&&this.zoomContainer.length>0||this.zoomContainer.length>0)&&(this.zoomOut=this.zoomContainer.find(".zoom-out"),this.zoomReset=this.zoomContainer.find(".zoom-reset"),this.zoomIn=this.zoomContainer.find(".zoom-in"),this.zoomInStep=this.zoomContainer.attr("data-in-step"),this.zoomOutStep=10-this.zoomContainer.attr("data-out-step"),this.zoomLevel=1,this.progressBar=this.zoomContainer.find(".zoom-bar"),this.zoomEvent(),null!==this.getZoomCookie("zoom_position")&&this.updateZoomCookie(this.getZoomCookie("zoom_position")))},setSizeContent:function(t,e){var n=this,i=t,r=n.container.find(".content-inner");1!=t?n.container.addClass("jnews_zoom_activated"):n.container.removeClass("jnews_zoom_activated"),r.length>0&&r.each((function(t,e){var n=o(e),r=null===n.parents(".jeg_inner_content").width()?n.parents(".jeg_custom_content_wrapper").width():n.parents(".jeg_inner_content").width(),s=n.parents(".entry-content"),a=n.parents(".with-share"),m=parseInt(n.css("marginLeft").replace("px","")),c=parseInt(n.css("marginRight").replace("px","")),h=n.height(),d=n[0].getBoundingClientRect().height,f=i>=1?d>h?d:h:d>h?h:d,l=f-f/i,g=a.length>0?m+c:0,u=i>=1?r/i-g:r/i-2*g;u=1==i?"":u,s.length>0?(s.css({height:parseInt(f)+"px"}),n.css({width:u}),n.find(" > *").css({maxWidth:u})):(n.css({marginBottom:l+30}),n.css({width:u}),n.find(" > *").css({maxWidth:u}))})),e&&setTimeout((function(){n.setSizeContent(t,!1)}),150)},resetZoom:function(){var t=this;t.zoomLevel=1,t.updateProgressBar(1),document.cookie="zoom_position="+t.zoomLevel+"; path=/;",t.setSizeContent(t.zoomLevel,!0);var e=t.container.find(".content-inner"),n=e.parents(".entry-content");e.length>0&&e.each((function(i,r){t.refresh=!0;var s=o(r);s.find(" > *").css({maxWidth:""}),s.css({"-ms-zoom":"","-ms-transform":"","-ms-transform-origin":"","-moz-transform":"","-moz-transform-origin":"","-o-transform":"","-o-transform-origin":"","-webkit-transform":"","-webkit-transform-origin":"",overflow:"",width:""}).trigger("containerchange"),n.length>0?n.css({height:""}):e.css({marginBottom:""})}))},updateZoomCookie:function(t){var e=this;e.updateProgressBar(t);var n=e.container.find(".content-inner"),i="scale("+t+")",r=t,s=e.transform_origin,a="hidden";1==t&&(i="",r="",s="",a=""),n.length&&n.each((function(t,n){e.refresh=!0,o(n).css({"-ms-zoom":r,"-ms-transform":i,"-ms-transform-origin":s,"-moz-transform":i,"-moz-transform-origin":s,"-o-transform":i,"-o-transform-origin":s,"-webkit-transform":i,"-webkit-transform-origin":s,overflow:a}).trigger("containerchange")})),e.setSizeContent(t,!0)},updateZoom:function(t){var e=this;e.zoomLevel+=t,e.zoomLevel=e.zoomLevel>1+e.zoomInStep/10?1+e.zoomInStep/10:e.zoomLevel,e.zoomLevel=e.zoomLevel<e.zoomOutStep/10?e.zoomOutStep/10:e.zoomLevel,e.updateProgressBar(e.zoomLevel),document.cookie="zoom_position="+e.zoomLevel+"; path=/;";var n="scale("+e.zoomLevel+")",i=e.zoomLevel,r=e.transform_origin,s="hidden";1==e.zoomLevel&&(n="",i="",r="",s="");var a=e.container.find(".content-inner");if(a.length&&a.each((function(t,a){e.refresh=!0,o(a).css({"-ms-zoom":i,"-ms-transform":n,"-ms-transform-origin":r,"-moz-transform":n,"-moz-transform-origin":r,"-o-transform":n,"-o-transform-origin":r,"-webkit-transform":n,"-webkit-transform-origin":r,overflow:s}).trigger("containerchange")})),"object"==typeof jnews&&"object"==typeof jnews.library){var m=jnews.library.globalBody.querySelectorAll(".jeg_preview_slider");m.length&&jnews.library.forEach(m,(function(o,t){if(jnews.library.dataStorage.has(o,"jeg.previewslider")){var e=jnews.library.dataStorage.get(o,"jeg.previewslider");"normal"===e.mode?e.resize_normal():"fullscreen"===e.mode&&e.resize_fullscreen()}}))}e.setSizeContent(e.zoomLevel,!0)},getZoomCookie:function(o){var t=document.cookie.match("(^|;) ?"+o+"=([^;]*)(;|$)");return t?t[2]:null},updateProgressBar:function(t){var e=o(this.progressBar),n=100*(t-.8)/.5+0,i=n+"%";n<=100?e.width(i):n>100&&e.width("100%")},zoomEvent:function(){var t=this,e=t.container.find(".content-inner");t.width=o(window).width(),t.height=o(window).height(),t.zoomOut.on("click",(function(){t.updateZoom(-.1)})),t.zoomIn.on("click",(function(){t.updateZoom(.1)})),t.zoomReset.on("click",(function(){t.resetZoom()})),e.length&&e.each((function(e,n){t.getZoomCookie("zoom_position");var i=o(n);i.off("containerchange DOMSubtreeModified changed.owl.carousel refreshed.owl.carousel").on("containerchange DOMSubtreeModified changed.owl.carousel refreshed.owl.carousel",(function(e){var n=o(this),r=n.parents(".post-autoload").length?n.parents(".post-autoload").data("id"):0,s=n;r&&(s=t.container.find('.post-autoload[data-id="'+r+'"]').find(".content-inner"));if(t.refresh){t.refresh=!1;var a=s.find(".owl-carousel");setTimeout((function(){a.each((function(t,e){o(e).data("owl.carousel").onResize(),i.trigger("contaianerchange")}))}),1500)}setTimeout(function(){var e=o(this),n=t.getZoomCookie("zoom_position"),i=e.parents(".entry-content"),r=e.parents(".post-autoload").length?e.parents(".post-autoload").data("id"):0,s=e;r&&(s=t.container.find('.post-autoload[data-id="'+r+'"]').find(".content-inner"));var a=s.height(),m=s[0].getBoundingClientRect().height,c=n>=1?m>a?m:a:m>a?a:m;i.length>0&&i.css({height:parseInt(c)+"px"})}.bind(this),1e3)}))})),o(window).on("resize",(function(){var e=o(window);t.width=e.width(),t.height=e.height(),t.resetZoom()}))}},o(document).on("jnews-ajax-load",(function(o,t){jnews.zoom.init()})),o(document).on("ready",(function(){jnews.zoom.init()}))}(jQuery);